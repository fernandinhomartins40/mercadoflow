<Window x:Class="MercadoFlow.Desktop.Views.ConfigurationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Configurações - MercadoFlow"
        Height="600"
        Width="800"
        MinHeight="500"
        MinWidth="700"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False">

    <Grid Background="{StaticResource BackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0"
                Background="{StaticResource PrimaryBrush}"
                Padding="16,12">
            <TextBlock Text="Configurações"
                       Foreground="White"
                       FontSize="18"
                       FontWeight="SemiBold"/>
        </Border>

        <!-- Content -->
        <TabControl Grid.Row="1" Margin="16">
            <!-- Monitoramento Tab -->
            <TabItem Header="Monitoramento">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <!-- Pastas Monitoradas -->
                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Pastas Monitoradas"
                                           Style="{StaticResource HeaderTextStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <ListBox Grid.Column="0"
                                             Name="FoldersListBox"
                                             Height="120"
                                             Margin="0,0,8,0"/>

                                    <StackPanel Grid.Column="1">
                                        <Button Content="Adicionar"
                                                Style="{StaticResource PrimaryButtonStyle}"
                                                Click="AddFolder_Click"
                                                MinWidth="80"/>
                                        <Button Content="Remover"
                                                Style="{StaticResource SecondaryButtonStyle}"
                                                Click="RemoveFolder_Click"
                                                MinWidth="80"/>
                                    </StackPanel>
                                </Grid>

                                <TextBlock Text="Essas pastas serão monitoradas em busca de arquivos XML e ZIP"
                                           Style="{StaticResource SecondaryTextStyle}"
                                           Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Configurações de Monitoramento -->
                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Configurações de Monitoramento"
                                           Style="{StaticResource HeaderTextStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <Label Content="Delay de Debounce (ms):"/>
                                        <TextBox Name="DebounceDelayTextBox"
                                                 Text="2000"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Tamanho Máximo (MB):"/>
                                        <TextBox Name="MaxFileSizeTextBox"
                                                 Text="50"
                                                 Margin="0,0,0,8"/>

                                        <CheckBox Name="ProcessSubfoldersCheckBox"
                                                  Content="Processar subpastas"
                                                  IsChecked="True"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <CheckBox Name="DeleteAfterProcessingCheckBox"
                                                  Content="Deletar após processamento"
                                                  Margin="0,0,0,8"/>

                                        <CheckBox Name="MoveToProcessedFolderCheckBox"
                                                  Content="Mover para pasta processados"
                                                  IsChecked="True"
                                                  Margin="0,0,0,8"/>

                                        <Label Content="Pasta Processados:"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0"
                                                     Name="ProcessedFolderTextBox"
                                                     Margin="0,0,4,0"/>
                                            <Button Grid.Column="1"
                                                    Content="..."
                                                    Click="BrowseProcessedFolder_Click"
                                                    Width="30"/>
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- API Tab -->
            <TabItem Header="API">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <!-- Configurações da API -->
                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Configurações da API"
                                           Style="{StaticResource HeaderTextStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <Label Content="URL Base:"/>
                                        <TextBox Name="ApiBaseUrlTextBox"
                                                 Text="https://api.mercadoflow.com"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Market ID:"/>
                                        <TextBox Name="MarketIdTextBox"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="API Key:"/>
                                        <PasswordBox Name="ApiKeyPasswordBox"
                                                     Margin="0,0,0,8"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <Label Content="Timeout (segundos):"/>
                                        <TextBox Name="TimeoutTextBox"
                                                 Text="300"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Tentativas de Retry:"/>
                                        <TextBox Name="RetryAttemptsTextBox"
                                                 Text="5"
                                                 Margin="0,0,0,8"/>

                                        <CheckBox Name="EnableCompressionCheckBox"
                                                  Content="Habilitar compressão"
                                                  IsChecked="True"/>
                                    </StackPanel>
                                </Grid>

                                <Button Content="Testar Conexão"
                                        Style="{StaticResource PrimaryButtonStyle}"
                                        Click="TestConnection_Click"
                                        HorizontalAlignment="Left"
                                        Margin="0,16,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Segurança -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Configurações de Segurança"
                                           Style="{StaticResource HeaderTextStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <CheckBox Name="ValidateCertificatesCheckBox"
                                                  Content="Validar certificados SSL"
                                                  IsChecked="True"
                                                  Margin="0,0,0,8"/>

                                        <CheckBox Name="RequireHttpsCheckBox"
                                                  Content="Requerer HTTPS"
                                                  IsChecked="True"
                                                  Margin="0,0,0,8"/>

                                        <CheckBox Name="EncryptLocalDataCheckBox"
                                                  Content="Criptografar dados locais"
                                                  IsChecked="True"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <CheckBox Name="ValidateXmlSignatureCheckBox"
                                                  Content="Validar assinatura XML"
                                                  IsChecked="True"
                                                  Margin="0,0,0,8"/>

                                        <CheckBox Name="ValidateXmlSchemaCheckBox"
                                                  Content="Validar schema XML"
                                                  IsChecked="True"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Desempenho Tab -->
            <TabItem Header="Desempenho">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Configurações de Desempenho"
                                           Style="{StaticResource HeaderTextStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <Label Content="Processamento Concorrente:"/>
                                        <TextBox Name="MaxConcurrentProcessingTextBox"
                                                 Text="5"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Tamanho do Lote:"/>
                                        <TextBox Name="BatchSizeTextBox"
                                                 Text="100"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Tamanho Máximo da Fila:"/>
                                        <TextBox Name="MaxQueueSizeTextBox"
                                                 Text="10000"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <Label Content="Timeout de Processamento (ms):"/>
                                        <TextBox Name="ProcessingTimeoutTextBox"
                                                 Text="30000"
                                                 Margin="0,0,0,8"/>

                                        <Label Content="Intervalo de Health Check (ms):"/>
                                        <TextBox Name="HealthCheckIntervalTextBox"
                                                 Text="60000"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Buttons -->
        <Border Grid.Row="2"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="#E0E0E0"
                BorderThickness="0,1,0,0"
                Padding="16">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                       >
                <Button Content="Salvar"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="Save_Click"
                        MinWidth="80"/>
                <Button Content="Cancelar"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Cancel_Click"
                        MinWidth="80"/>
                <Button Content="Aplicar"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Apply_Click"
                        MinWidth="80"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>