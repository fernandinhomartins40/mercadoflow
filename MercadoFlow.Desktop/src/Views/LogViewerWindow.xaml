<Window x:Class="MercadoFlow.Desktop.Views.LogViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Visualizador de Logs - MercadoFlow"
        Height="600"
        Width="1000"
        MinHeight="400"
        MinWidth="600"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False">

    <Grid Background="{StaticResource BackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0"
                Background="{StaticResource PrimaryBrush}"
                Padding="16,12">
            <TextBlock Text="Visualizador de Logs"
                       Foreground="White"
                       FontSize="18"
                       FontWeight="SemiBold"/>
        </Border>

        <!-- Filters -->
        <Border Grid.Row="1"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="#E0E0E0"
                BorderThickness="0,0,0,1"
                Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" Content="Nível:" VerticalAlignment="Center"/>
                <ComboBox Grid.Column="1" Name="LogLevelComboBox" Margin="4,0">
                    <ComboBoxItem Content="Todos" IsSelected="True"/>
                    <ComboBoxItem Content="Debug"/>
                    <ComboBoxItem Content="Information"/>
                    <ComboBoxItem Content="Warning"/>
                    <ComboBoxItem Content="Error"/>
                    <ComboBoxItem Content="Critical"/>
                </ComboBox>

                <Label Grid.Column="2" Content="Fonte:" VerticalAlignment="Center" Margin="16,0,0,0"/>
                <ComboBox Grid.Column="3" Name="SourceComboBox" Margin="4,0">
                    <ComboBoxItem Content="Todas" IsSelected="True"/>
                </ComboBox>

                <Label Grid.Column="4" Content="Buscar:" VerticalAlignment="Center" Margin="16,0,0,0"/>
                <TextBox Grid.Column="5" Name="SearchTextBox" Margin="4,0"/>

                <Button Grid.Column="6"
                        Content="Atualizar"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="Refresh_Click"
                        Margin="8,0,0,0"/>
            </Grid>
        </Border>

        <!-- Log Content -->
        <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Headers -->
                <Grid Grid.Row="0"
                      Background="#F5F5F5"
                      Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Timestamp" FontWeight="Bold" Margin="8,4"/>
                    <TextBlock Grid.Column="1" Text="Nível" FontWeight="Bold" Margin="8,4"/>
                    <TextBlock Grid.Column="2" Text="Fonte" FontWeight="Bold" Margin="8,4"/>
                    <TextBlock Grid.Column="3" Text="Mensagem" FontWeight="Bold" Margin="8,4"/>
                </Grid>

                <!-- Log Items -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <ItemsControl Name="LogItemsControl">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,4">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                   Text="{Binding Timestamp, StringFormat=dd/MM/yyyy HH:mm:ss}"
                                                   FontFamily="Consolas"
                                                   FontSize="11"
                                                   Margin="8,0"/>

                                        <Border Grid.Column="1"
                                                Background="{Binding LevelColor}"
                                                CornerRadius="8"
                                                Padding="4,1"
                                                Margin="4">
                                            <TextBlock Text="{Binding Level}"
                                                       Foreground="White"
                                                       FontSize="9"
                                                       HorizontalAlignment="Center"/>
                                        </Border>

                                        <TextBlock Grid.Column="2"
                                                   Text="{Binding Source}"
                                                   FontSize="11"
                                                   Margin="8,0"/>

                                        <TextBlock Grid.Column="3"
                                                   Text="{Binding Message}"
                                                   TextWrapping="Wrap"
                                                   FontSize="11"
                                                   Margin="8,0"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="3"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="#E0E0E0"
                BorderThickness="0,1,0,0"
                Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Name="StatusTextBlock"
                           Text="Pronto"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="1"
                        Content="Exportar"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Export_Click"
                        Margin="0,0,8,0"/>

                <Button Grid.Column="2"
                        Content="Fechar"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Close_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>